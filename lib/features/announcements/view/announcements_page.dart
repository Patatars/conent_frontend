import 'dart:math';

import 'package:auto_route/annotations.dart';
import 'package:connent_frontend/features/announcements/view/register_for_event_page.dart';
import 'package:connent_frontend/features/news/widgets/widgets.dart';
import 'package:connent_frontend/ui/ui.dart';
import 'package:flutter/material.dart';

@RoutePage()
class AnnouncementsPage extends StatelessWidget {
  const AnnouncementsPage({
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    return Scaffold(
      resizeToAvoidBottomInset: true,
      backgroundColor: theme.dialogBackgroundColor,
      body: CustomScrollView(
        slivers: [
          CustomSliverAppBar(
            // expandedHeight: 300,
            backgroundColor: theme.primaryColor,
            // HSLColor.fromColor(theme.dialogBackgroundColor).withLightness(0.8).toColor(),
            collapsedHeight: 65,
            title: Padding(
              padding: const EdgeInsets.only(bottom: 10.0),
              child: ProjectTextField(
                onEditingComplete: () => print(123),
                suffixIcon: IconButton(
                  onPressed: () {},
                  icon: const Icon(Icons.search),
                ),
              ),
            ),
            bottom: PreferredSize(
              preferredSize: const Size.fromHeight(50),
              child: Padding(
                padding: const EdgeInsets.symmetric(horizontal: 10)
                    .add(const EdgeInsets.only(bottom: 10)),
                child: Row(
                  mainAxisAlignment: MainAxisAlignment.spaceAround,
                  children: [
                    ElevatedButton(onPressed: () {
                    }, child: Text('–°–µ–≥–æ–¥–Ω—è')),
                    const ElevatedButton(onPressed: null, child: Text('–ó–∞–≤—Ç—Ä–∞')),
                    const ElevatedButton(
                        onPressed: null, child: Text('–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É')),
                  ],
                ),
              ),
            ),
          ),
          SliverList.builder(
            itemBuilder: (context, index) => NewsWidget(
              actions: [
                ElevatedButton(
                    style: ButtonStyle(
                        shape: MaterialStatePropertyAll(
                          ContinuousRectangleBorder(
                            borderRadius: BorderRadius.circular(25),
                          ),
                        ),
                        backgroundColor:
                            MaterialStatePropertyAll(theme.primaryColor),
                        textStyle: MaterialStatePropertyAll(
                            theme.textTheme.bodyLarge)),
                    onPressed: () {
                      showModalBottomSheet(isScrollControlled: true, context: context, builder: (context) => const RegisterForEventPage());
                    },
                    child: Text(
                      '–∑–∞–ø–∏—Å–∞—Ç—å—Å—è',
                      style: theme.textTheme.bodyLarge
                          ?.copyWith(color: Colors.white),
                    )),
                OutlinedButton(
                    style: ButtonStyle(
                        side: const MaterialStatePropertyAll(
                            BorderSide(color: Colors.black, width: 3)),
                        shape: MaterialStatePropertyAll(
                          ContinuousRectangleBorder(
                            borderRadius: BorderRadius.circular(25),
                          ),
                        ),
                        textStyle: MaterialStatePropertyAll(
                            theme.textTheme.bodyLarge)),
                    onPressed: () {},
                    child: Text(
                      '–ø–æ–¥—Ä–æ–±–Ω–µ–µ',
                      style: theme.textTheme.bodyLarge
                          ?.copyWith(color: Colors.black),
                    )),
              ],
              authorsName: Text(
                '–ê–≤—Ç–æ—Ä',
                style:
                    theme.textTheme.titleMedium?.copyWith(color: Colors.black),
              ),
              avatar: CircleAvatar(
                backgroundColor:
                    Colors.primaries[Random().nextInt(Colors.primaries.length)],
              ),
              text:
                  '''üìÜ–í –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –≤–µ—Å–µ–Ω–Ω–∏—Ö –∫–∞–Ω–∏–∫—É–ª —É—á–∏—Ç–µ–ª—è —Å—Ç–∞—Ä—à–µ–π —à–∫–æ–ª—ã –∏–º–µ–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–Ω—è—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ –º–æ—Ä–∞–ª—å–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞. –î–ª—è –ø–µ–¥–∞–≥–æ–≥–æ–≤ –±—ã–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–ª–æ—â–∞–¥–∫–∏:

‚úÖ¬´–í–≤–µ—Ä—Ö –ø–æ —Ç–µ—á–µ–Ω–∏—é¬ª - –∑–∞–Ω—è—Ç–∏–µ –≤ –±–∞—Å—Å–µ–π–Ω–µ. –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –±–ª–∏–∑–æ—Å—Ç—å –∫ –≤–æ–¥–µ –¥–∞—Ä–∏—Ç —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, –∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≥–∞—Ä–º–æ–Ω—ã —Å—á–∞—Å—Ç—å—è.

‚úÖ¬´–ú—è–≥–∫–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ¬ª - –∑–∞–Ω—è—Ç–∏–µ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ø–∏–ª–∞—Ç–µ—Å–∞. –ê–∫—Ç–∏–≤–Ω–∞—è –º–µ–¥–∏—Ç–∞—Ü–∏—è, —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –ø–æ–º–æ–≥–∞—é—Ç —Å–Ω–∏–∑–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –∫–æ—Ä—Ç–∏–∑–æ–ª–∞, —É—Å–ø–æ–∫–æ–∏—Ç—å —Ä–∞–∑—É–º –∏ —Ç–µ–ª–æ.

‚úÖ¬´–ü–µ–π–∑–∞–∂ –º–æ–µ–π –¥—É—à–∏¬ª - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω—ã —Å –ø–æ–º–æ—â—å—é –∫–∞—Ä–∞–Ω–¥–∞—à–µ–π. –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –Ω–∞—à–µ –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ –º—ã—Å–ª–∏—Ç –æ–±—Ä–∞–∑–∞–º–∏, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º—ã—Å–ª–µ–π –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ –≤–∑—è—Ç—å –±—É–º–∞–≥—É –∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞ –≤—Ä–µ–º—è ¬´–æ—Ç–∫–ª—é—á–∏—Ç—Å—è¬ª –æ—Ç –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á.

‚úÖ¬´–Ø—Ä–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã¬ª - —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞–≥–Ω–∏—Ç–∞ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–∞–∫—Ä–∞–ª—å–Ω—ã–º —Å–º—ã—Å–ª–æ–º. –ö–æ–ª–ª–µ–≥–∏ –≤—ã–±—Ä–∞–ª–∏ —Å–≤–æ–π –æ–±—Ä–∞–∑ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–≥–æ –±—É–¥—É—â–µ–≥–æ –∏ –ø–æ–≥—Ä—É–∑–∏–≤—à–∏—Å—å –≤ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Å–º–æ–≥–ª–∏ –∑–∞—Ä—è–¥–∏—Ç—å—Å—è –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–µ–º ¬´–Ω–∞ –∑–∞–≤—Ç—Ä–∞¬ª.

–í—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–µ —Å–æ—Å—Ç–æ—è–ª–∏—Å—å –±—ã –±–µ–∑ –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ –ø–ª–æ—â–∞–¥–æ–∫, –∫–æ—Ç–æ—Ä—ã–º –º—ã –≥–æ–≤–æ—Ä–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏. –≠—Ç–æ –û–ª—å–≥–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞ –í–æ—Ä–æ–±—å–µ–≤–∞, –¢–∞—Ç—å—è–Ω–∞ –ê—Ä—Ç–µ–º–æ–≤–Ω–∞ –°–ª–∞–≤–∏–Ω—Å–∫–∞—è, –õ—é–¥–º–∏–ª–∞ –ê–ª–µ–∫—Å–µ–µ–≤–Ω–∞ –õ–∞–ø—à–∏–Ω–∞, –¢–∞—Ç—å—è–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞ –ï–º–µ–ª—å—è–Ω–µ–Ω–∫–æ –∏ –ï–ª–µ–Ω–∞ –ì–µ–Ω–Ω–∞–¥—å–µ–≤–Ω–∞ –¶–µ–ø–∫–æ.

üåû–ñ–µ–ª–∞–µ–º –≤—Å–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥—É—à–µ–≤–Ω–æ–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ.''',
              image: Image.network(
                  loadingBuilder: (context, child, loadingProgress) {
                if (loadingProgress == null) return child;
                return Center(
                    child: CircularProgressIndicator(
                  value: loadingProgress.expectedTotalBytes != null
                      ? loadingProgress.cumulativeBytesLoaded /
                          loadingProgress.expectedTotalBytes!
                      : null,
                ));
              }, 'https://sun9-43.userapi.com/impg/hPZJ9guTWFHu9bNZB6xAt721fIOB8bJG8JRC7g/lYt2yhtRUPU.jpg?size=1560x1040&quality=95&sign=0e1964098ca3e5685e6ff8ade9a9261f&type=album'),
            ),
            itemCount: 50,
          ),
        ],
      ),
    );
  }
}
